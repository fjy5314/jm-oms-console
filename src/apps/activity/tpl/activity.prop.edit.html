<div>
    <div ui-view class="fade-in-down"></div>
    <form ng-show="$state.is('app.activity.prop.edit')" name="formValidate" class="form-horizontal form-validation">
        <div class="panel panel-default">
            <div class="panel-heading titlefixed">
                <strong>{{'activity.propedit.EditInformation'|translate}}</strong>
            </div>
            <div class="panel-body paddingtop">
                <div class="form-group">
                    <label class="col-sm-2 control-label">logo</label>

                    <div class="col-sm-9">
                        <a ui-sref=".logo"><img width="200" height="200" ng-src="{{prop.logo}}" onerror="this.src='apps/common/img/logo.jpg'"/></a>
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label"><code style="background-color: transparent">*</code>{{'activity.propedit.code'|translate}}</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" style="max-width: 320px;" placeholder="{{'activity.propedit.code'|translate}}" ng-model="prop.code" ng-required="true">
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label"><code style="background-color: transparent">*</code>{{'activity.propedit.name'|translate}}</label>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" style="max-width: 320px;" placeholder="{{'activity.propedit.name'|translate}}" ng-model="prop.name" ng-required="true">
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label"><code style="background-color: transparent">*</code>{{'activity.propedit.describe'|translate}}</label>

                    <div class="col-sm-9">
                        <textarea class="form-control" style="max-width: 320px;" rows="4" style="resize: none;" placeholder="{{'activity.propedit.describe'|translate}}" ng-model="prop.description" ng-required="true"></textarea>
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label" style="margin-top: 3px">{{'activity.propedit.label'|translate}}</label>
                    <div class="col-sm-9">
                        <tags-input class="bootstrap" style="max-width: 320px;" ng-model="prop.tags" add-on-space="true" add-on-paste="true" placeholder="{{'activity.propedit.label'|translate}}" min-length="1"></tags-input>
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label">{{'activity.propedit.tab'|translate}}</label>
                    <div class="col-sm-9">
                        <input type="text" style="max-width: 150px;" class="form-control" placeholder="{{'activity.propedit.tab'|translate}}" ng-model="prop.sign">
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label">{{'activity.propedit.WhetherGift'|translate}}</label>
                    <div class="col-sm-9">
                        <label class="i-checks checkbox-inline">
                            <input type="checkbox" ng-model="prop.isGive"><i></i>
                        </label>
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label" >{{'activity.propedit.SubordinateApplication'|translate}}</label>
                    <div class="col-sm-9">
                        <select class="form-control" style="max-width: 150px;" ng-model="prop.app" ng-options="option._id as option.name for option in apps">
                            <option value="">{{'activity.propedit.NoApplication'|translate}}</option>
                        </select>
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label"><code style="background-color: transparent">*</code><label translate="">{{'activity.propedit.PropType'|translate}}</label></label>

                    <div class="col-sm-9">
                        <select class="form-control" style="max-width: 150px;" ng-model="prop.type" ng-change="changeType()">
                            <option value="">{{'activity.propedit.PleaseSelect'|translate}}</option>
                            <option value="0">{{'activity.propedit.package'|translate}}</option>
                            <option value="1" >{{'activity.propedit.VirtualCurrency'|translate}}</option>
                            <option value="2">{{'activity.propedit.ConventionalProps'|translate}}</option>
                        </select>
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <div class="form-group" ng-if="prop.type=='2'">
                    <label class="col-sm-2 control-label"><code style="background-color: transparent">*</code>{{'activity.propedit.UsageMode'|translate}}</label>

                    <div class="col-sm-9">
                        <select class="form-control w-sm" ng-model="prop.useMode" ng-change="changeUseMode()">
                            <option value="" >{{'activity.propedit.PleaseSelect'|translate}}</option>
                            <option value="0" >{{'activity.propedit.ResidentProduct'|translate}}</option>
                            <option value="1">{{'activity.propedit.consumables'|translate}}</option>
                            <option value="2" >{{'activity.propedit.collection'|translate}}</option>
                        </select>
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <div class="form-group" ng-if="prop.type=='2'&&(prop.useMode=='1'||prop.useMode=='2')">
                    <label class="col-sm-2 control-label">{{amountName||'数量'}}</label>

                    <div class="col-sm-9">
                        <input type="number" class="form-control w-sm" placeholder="{{'common.amount'|translate}}" min="1" ng-pattern="/^[0-9]*$/" ng-model="prop.amount">
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <!--<div class="form-group" ng-if="prop.type=='2'">-->
                    <!--<label class="col-sm-2 control-label">是否堆叠</label>-->
                    <!--<div class="col-sm-9">-->
                        <!--<label class="i-checks checkbox-inline">-->
                            <!--<input type="checkbox" ng-model="prop.isStack"><i></i>-->
                        <!--</label>-->
                    <!--</div>-->
                    <!--<div class="col-sm-1"></div>-->
                <!--</div>-->

                <div class="form-group" ng-if="prop.type=='0'||prop.useMode=='2'">
                    <label class="col-sm-2 control-label" >{{'activity.propedit.AdditionalProps'|translate}}</label>
                    <div class="col-sm-9">
                        <table class="table table-bordered table-hover table-condensed bg-white-only">
                            <span class="btn btn-default" ng-click="addItem()">{{'activity.propedit.AddProps'|translate}}</span>
                            <tr style="font-weight: bold">
                                <td style="width:40%" >{{'activity.propedit.prop'|translate}}</td>
                                <td style="width:30%" >{{'activity.propedit.quantity'|translate}}</td>
                                <td style="width:30%" >{{'activity.propedit.deadline'|translate}}</td>
                                <td style="width:40px" >{{'activity.propedit.edit'|translate}}</td>
                            </tr>
                            <tr ng-repeat="item in prop.props">
                                <td class="v-middle">
                                    <select class="form-control" style="min-width: 150px; width: auto" ng-model="item.prop" ng-options="option._id as option.name for option in props" ng-required="true">
                                        <option value="">{{'activity.propedit.NoProps'|translate}}</option>
                                    </select>
                                </td>
                                <td class="v-middle">
                                    <input type="number" class="form-control" placeholder="{{'common.amount'|translate}}" min="1" ng-pattern="/^[0-9]*$/" ng-model="item.amount">
                                </td>
                                <td class="v-middle">
                                    <input type="number" class="form-control" placeholder="{{'activity.propedit.deadline'|translate}}" min="0" ng-pattern="/^[0-9]*$/" ng-model="item.expire">
                                </td>
                                <td style="white-space: nowrap">
                                    <a class="btn btn-sm btn-danger" ng-click="removeItem($index)">{{'activity.propedit.delete'|translate}}</a>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-sm-1"></div>
                </div>
            </div>


            <footer class="panel-footer text-right bg-light lter">
                <!--<div style="max-width: 750px">-->
                    <button type="submit" class="btn btn-success" ng-click="!formValidate.$invalid&&save()">{{'activity.propedit.save'|translate}}</button>
                <!--</div>-->
            </footer>
        </div>
    </form>

</div>